# Instagram ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚¢ãƒ—ãƒª - å¼•ãç¶™ãæ›¸ï¼ˆ2025-08-28ï¼‰

## ğŸ“‹ ç¾çŠ¶ã‚µãƒãƒªãƒ¼

### âœ… å®Œäº†æ¸ˆã¿ã®ä¿®æ­£ãƒ»æ”¹å–„
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Vercel (Production ç’°å¢ƒã§ç¨¼åƒ)
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Render (https://instagram-marketing-backend-v2.onrender.com)
- **ç’°å¢ƒå¤‰æ•°**: `VITE_API_BASE_URL=https://instagram-marketing-backend-v2.onrender.com/api`
- **Instagram Graph API èªè¨¼**: æˆåŠŸ
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼IDå‚ç…§çµ±ä¸€**: `currentUser?.userId` â†’ `currentUser?.id` ã¸ã®ä¿®æ­£å®Œäº†
- **API ãƒ‘ã‚¹ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: æ­£ã—ã„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ‘ã‚¹ã®è¨­å®šå®Œäº†
- **ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°**: APIå‘¼ã³å‡ºã—ã®è©³ç´°ãƒ­ã‚°å®Ÿè£…å®Œäº†
- **via.placeholder.comä¾å­˜**: å‰Šé™¤å®Œäº†ï¼ˆBase64 SVGç”»åƒã«ç½®æ›ï¼‰
- **ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½**: æœ€å¤§3å›ã€æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ä»˜ããƒªãƒˆãƒ©ã‚¤å®Ÿè£…
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†**: 10ç§’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå®Ÿè£…
- **APIçŠ¶æ…‹ç›£è¦–**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–æ©Ÿèƒ½å®Ÿè£…
- **æœ¬ç•ªAPIåˆ‡ã‚Šæ›¿ãˆ**: å®Œäº†ï¼ˆMock APIãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯åœæ­¢ï¼‰

### ğŸ‰ æœ¬ç•ªAPIå‹•ä½œç¢ºèªçµæœï¼ˆ2025-08-28ï¼‰
âœ… **ã™ã¹ã¦ã®APIãŒ200 OKã‚’è¿”ã—ã¦ã„ã¾ã™ï¼**

1. **`/api/health`**: 200 OK - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æˆåŠŸ
2. **`/api/scheduler/posts?userId=demo_user`**: 200 OK - ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æŠ•ç¨¿å–å¾—æˆåŠŸ
3. **`/api/instagram/history/demo_user`**: 200 OK - Instagramå±¥æ­´å–å¾—æˆåŠŸ

**æˆåŠŸç‡: 100.0%** - Mock APIã‚’åœæ­¢ã—ã¦æœ¬ç•ªAPIã«å®Œå…¨åˆ‡ã‚Šæ›¿ãˆå®Œäº†

## ğŸ”§ å®Ÿæ–½æ¸ˆã¿ä¿®æ­£ãƒ»æ”¹å–„å†…å®¹

### 1. Mock APIã®æ”¹å–„
- **ç”»åƒURL**: via.placeholder.com â†’ Base64 SVGç”»åƒã«ç½®æ›ï¼ˆ503ã‚¨ãƒ©ãƒ¼è§£æ¶ˆï¼‰
- **ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½**: æœ€å¤§3å›ã®ãƒªãƒˆãƒ©ã‚¤ã€æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ä»˜ã
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†**: 10ç§’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã§APIå‘¼ã³å‡ºã—ã‚’åˆ¶å¾¡
- **è©³ç´°ãƒ­ã‚°**: APIå‘¼ã³å‡ºã—ã®è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›

### 2. æ–°æ©Ÿèƒ½ã®è¿½åŠ 
- **ApiStatusMonitorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: æœ¬ç•ªAPIã®çŠ¶æ…‹ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
- **Dashboardçµ±åˆ**: ã€ŒğŸ” APIçŠ¶æ…‹ã€ã‚¿ãƒ–ã§APIçŠ¶æ…‹ã‚’ç¢ºèªå¯èƒ½
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã®æ¸¬å®šã¨è¡¨ç¤º
- **è‡ªå‹•ç›£è¦–**: 5åˆ†ã”ã¨ã®è‡ªå‹•APIçŠ¶æ…‹ãƒã‚§ãƒƒã‚¯

### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„
- **404ã‚¨ãƒ©ãƒ¼**: å³åº§ã«Mock APIã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼**: ãƒªãƒˆãƒ©ã‚¤å¾Œã«Mock APIã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: AbortControllerã«ã‚ˆã‚‹é©åˆ‡ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†

### 4. æœ¬ç•ªAPIå®Œå…¨åˆ‡ã‚Šæ›¿ãˆï¼ˆ2025-08-28å®Œäº†ï¼‰
- **Mock APIãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: å®Œå…¨åœæ­¢
- **æœ¬ç•ªAPIã®ã¿ä½¿ç”¨**: ã™ã¹ã¦ã®APIå‘¼ã³å‡ºã—ã‚’æœ¬ç•ªç’°å¢ƒã«çµ±ä¸€
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- **ãƒ­ã‚°å‡ºåŠ›**: `[PRODUCTION API]` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã§æœ¬ç•ªAPIä½¿ç”¨ã‚’æ˜ç¤º

## ğŸš¨ çµ¶å¯¾ã«å¤‰æ›´ã—ã¦ã¯ã„ã‘ãªã„ç®‡æ‰€

### ç’°å¢ƒå¤‰æ•°
- **`VITE_API_BASE_URL`**: ã“ã®ã‚­ãƒ¼åã¯å¤‰æ›´ç¦æ­¢
- **API ãƒ™ãƒ¼ã‚¹ URL**: `https://instagram-marketing-backend-v2.onrender.com/api` ã¯å¤‰æ›´ç¦æ­¢

### èªè¨¼ãƒ•ãƒ­ãƒ¼
- **Instagram Graph API èªè¨¼ãƒ•ãƒ­ãƒ¼**: accessToken å–å¾— & business_account å‚ç…§éƒ¨åˆ†ã¯æ—¢ã«å‹•ä½œä¸­
- **ProtectedRoute èªè¨¼åˆ¤å®š**: `isAuthenticated` ã‚„ `currentUser` ãƒã‚§ãƒƒã‚¯å‡¦ç†ã¯çµ¶å¯¾ã«æ®‹ã™

## ğŸ“Š ç¾åœ¨ã®å‹•ä½œçŠ¶æ³

### æ­£å¸¸å‹•ä½œ
- Instagram Graph API èªè¨¼ãƒ»æŠ•ç¨¿å–å¾—
- ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ»ãƒšãƒ¼ã‚¸é·ç§»
- åŸºæœ¬çš„ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
- æœ¬ç•ªAPIï¼ˆã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§200 OKï¼‰
- APIçŠ¶æ…‹ç›£è¦–æ©Ÿèƒ½

### å®Œäº†æ¸ˆã¿
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API `/instagram/history/:userId` ã®å‹•ä½œç¢ºèª
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API `/scheduler/posts` ã®å‹•ä½œç¢ºèª
- æœ¬ç•ªAPIã®å®Œå…¨ãªå‹•ä½œç¢ºèª
- Mock APIã®å®Œå…¨åœæ­¢

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### å®Œäº†æ¸ˆã¿
âœ… **æœ¬ç•ªAPIåˆ‡ã‚Šæ›¿ãˆå®Œäº†**
âœ… **Mock APIåœæ­¢å®Œäº†**
âœ… **APIçŠ¶æ…‹ç›£è¦–æ©Ÿèƒ½å®Ÿè£…å®Œäº†**

### é•·æœŸçš„ãªæ”¹å–„é …ç›®
1. **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼è¡¨ç¤º
2. **ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹**: APIå‘¼ã³å‡ºã—ä¸­ã®é©åˆ‡ãªãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
3. **é€šçŸ¥æ©Ÿèƒ½**: APIéšœå®³æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã®æ”¹å–„

## ğŸ“ æŠ€è¡“çš„è©³ç´°

### æœ¬ç•ªAPIåˆ‡ã‚Šæ›¿ãˆå¾Œã®å‹•ä½œ
```typescript
// æœ¬ç•ªAPIã®ã¿ã‚’ä½¿ç”¨ï¼ˆMock APIãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãªã—ï¼‰
const response = await apiWithFallback.getInstagramHistory(userId);
const scheduledPosts = await apiWithFallback.getScheduledPosts(userId, month, year);

// ã‚¨ãƒ©ãƒ¼æ™‚ã¯é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
try {
  const data = await apiWithFallback.getInstagramHistory(userId);
  // æˆåŠŸæ™‚ã®å‡¦ç†
} catch (error) {
  // ã‚¨ãƒ©ãƒ¼æ™‚ã®å‡¦ç†ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼‰
  console.error('APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼:', error.message);
}
```

### APIçŠ¶æ…‹ç›£è¦–ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- `/health` - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- `/instagram/history/demo_user` - æŠ•ç¨¿å±¥æ­´
- `/scheduler/posts?userId=demo_user` - ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æŠ•ç¨¿

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ
1. Dashboardã®ã€ŒğŸ” APIçŠ¶æ…‹ã€ã‚¿ãƒ–ã§è©³ç´°ç¢ºèª
2. ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–ã‚’ç¢ºèª
3. ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã§ `[PRODUCTION API]` ã®å‡ºåŠ›ã‚’ç¢ºèª

### èªè¨¼ã‚¨ãƒ©ãƒ¼ãŒç¶šãå ´åˆ
1. `localStorage` ã®èªè¨¼ãƒ‡ãƒ¼ã‚¿ç¢ºèª
2. `currentUser` ã®çŠ¶æ…‹ç¢ºèª
3. Instagram Graph API ã®æœ‰åŠ¹æœŸé™ç¢ºèª

### APIçŠ¶æ…‹ç›£è¦–ã®ä½¿ç”¨æ–¹æ³•
1. Dashboardã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒğŸ” APIçŠ¶æ…‹ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. å„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®çŠ¶æ…‹ã‚’ç¢ºèª
4. å¿…è¦ã«å¿œã˜ã¦ã€Œå†ç¢ºèªã€ãƒœã‚¿ãƒ³ã§æ‰‹å‹•ãƒã‚§ãƒƒã‚¯

## ğŸ“ å¼•ãç¶™ããƒ¡ãƒƒã‚»ãƒ¼ã‚¸

ã€ŒInstagram èªè¨¼ãƒ»æŠ•ç¨¿å–å¾—ã¯æˆåŠŸã—ã¦ãŠã‚Šã€æœ¬ç•ªAPIã¸ã®å®Œå…¨åˆ‡ã‚Šæ›¿ãˆã‚‚å®Œäº†æ¸ˆã¿ã€‚Mock APIã® via.placeholder.com ã‚¨ãƒ©ãƒ¼ã¯è§£æ¶ˆæ¸ˆã¿ã€‚æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸAPIçŠ¶æ…‹ç›£è¦–æ©Ÿèƒ½ï¼ˆDashboardã®ã€ŒğŸ” APIçŠ¶æ…‹ã€ã‚¿ãƒ–ï¼‰ã§æœ¬ç•ªAPIã®çŠ¶æ…‹ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–å¯èƒ½ã€‚ç’°å¢ƒå¤‰æ•°åã€Graph API èªè¨¼ãƒ•ãƒ­ãƒ¼ã€ProtectedRoute ã®èªè¨¼ãƒã‚§ãƒƒã‚¯å‡¦ç†ã¯çµ¶å¯¾ã«å¤‰æ›´ã—ãªã„ã“ã¨ã€‚ç¾åœ¨ã¯æœ¬ç•ªAPIã®ã¿ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€Mock APIã¸ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯ç™ºç”Ÿã—ãªã„ã€‚ã€

## ğŸ†• æ–°æ©Ÿèƒ½ã®ä½¿ç”¨æ–¹æ³•

### APIçŠ¶æ…‹ç›£è¦–
```typescript
// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ç”¨ä¾‹
import ApiStatusMonitor from '../components/ApiStatusMonitor';

// çŠ¶æ…‹å¤‰æ›´æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
const handleStatusChange = (status) => {
  console.log('APIçŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ:', status);
};

// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¡¨ç¤º
<ApiStatusMonitor onStatusChange={handleStatusChange} />
```

### æœ¬ç•ªAPIå‘¼ã³å‡ºã—
```typescript
// æŠ•ç¨¿å±¥æ­´å–å¾—ï¼ˆæœ¬ç•ªAPIã®ã¿ï¼‰
const history = await apiWithFallback.getInstagramHistory(userId);

// ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æŠ•ç¨¿å–å¾—ï¼ˆæœ¬ç•ªAPIã®ã¿ï¼‰
const scheduled = await apiWithFallback.getScheduledPosts(userId, month, year);

// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
try {
  const data = await apiWithFallback.getInstagramHistory(userId);
  // æˆåŠŸæ™‚ã®å‡¦ç†
} catch (error) {
  // ã‚¨ãƒ©ãƒ¼æ™‚ã®å‡¦ç†
  console.error('APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼:', error.message);
}
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±

### æœ¬ç•ªAPIãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ï¼ˆ2025-08-28æ¸¬å®šï¼‰
- **`/health`**: 41,706msï¼ˆåˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã€Cold Startï¼‰
- **`/scheduler/posts`**: 286ms
- **`/instagram/history`**: 541ms

### æ³¨æ„äº‹é …
- åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã¯Cold Startã«ã‚ˆã‚Šå¿œç­”æ™‚é–“ãŒé•·ããªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
- 2å›ç›®ä»¥é™ã®ã‚¢ã‚¯ã‚»ã‚¹ã§ã¯å¿œç­”æ™‚é–“ãŒå¤§å¹…ã«æ”¹å–„ã•ã‚Œã¾ã™

---

**æœ€çµ‚æ›´æ–°**: 2025-08-28  
**æ‹…å½“è€…**: AI Assistant  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æœ¬ç•ªAPIåˆ‡ã‚Šæ›¿ãˆå®Œäº†ã€Mock APIåœæ­¢å®Œäº†ã€å‹•ä½œç¢ºèªå®Œäº†
